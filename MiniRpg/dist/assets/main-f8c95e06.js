import"./modulepreload-polyfill-3cfb730f.js";const n={apiKey:"AIzaSyD19hXl7T_hR22RKTbO0HRqzJLWB-dhnpw",authDomain:"small-games-dda7a.firebaseapp.com",projectId:"small-games-dda7a",storageBucket:"small-games-dda7a.appspot.com",messagingSenderId:"536294849994",appId:"1:536294849994:web:a7eaf666f68f46c537e333"};firebase.apps.length||firebase.initializeApp(n);const r=firebase.firestore(),t="1";async function s(){try{const e=await r.collection("games").where("gate","==",t).get();if(e.empty)return console.log("No matching game found."),"";{const o=e.docs[0].data();return console.log("Found matching game:",o),o.url}}catch(e){return console.error("Error:",e),""}}async function c(){try{const e=await r.collection("games").where("is_completed","==",!1).orderBy("sort_order").limit(1).get();if(e.empty)return console.log("No more games to complete."),null;{const o=e.docs[0],a=o.data();return console.log("First not completed game:",a),a.id=o.id,a}}catch(e){return console.error("Error:",e),null}}async function l(e){try{await r.collection("games").doc(e).update({gate:t}),console.log("Game",e,"marked as gate",t)}catch(o){console.error("Error updating game data:",o)}}c().then(e=>{e&&(e.gate===""?s().then(o=>{o!==""?window.location.href=o:l(e.id).then(()=>{window.location.href=e.url})}):e.gate!==t?alert("предыдущая глава расследования еще не завершена!"):window.location.href=e.url,console.log("game",e))});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi1mOGM5NWUwNi5qcyIsInNvdXJjZXMiOlsiLi4vLi4vaW5kZXguaHRtbD9odG1sLXByb3h5JmluZGV4PTAuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAvLyBJbXBvcnQgdGhlIGZ1bmN0aW9ucyB5b3UgbmVlZCBmcm9tIHRoZSBTREtzIHlvdSBuZWVkXG4gICAgICAvLyBUT0RPOiBBZGQgU0RLcyBmb3IgRmlyZWJhc2UgcHJvZHVjdHMgdGhhdCB5b3Ugd2FudCB0byB1c2VcbiAgICAgIC8vIGh0dHBzOi8vZmlyZWJhc2UuZ29vZ2xlLmNvbS9kb2NzL3dlYi9zZXR1cCNhdmFpbGFibGUtbGlicmFyaWVzXG4gICAgICAvLyBZb3VyIHdlYiBhcHAncyBGaXJlYmFzZSBjb25maWd1cmF0aW9uXG4gICAgICBjb25zdCBmaXJlYmFzZUNvbmZpZyA9IHtcbiAgICAgICAgYXBpS2V5OiAnQUl6YVN5RDE5aFhsN1RfaFIyMlJLVGJPMEhScXpKTFdCLWRobnB3JyxcbiAgICAgICAgYXV0aERvbWFpbjogJ3NtYWxsLWdhbWVzLWRkYTdhLmZpcmViYXNlYXBwLmNvbScsXG4gICAgICAgIHByb2plY3RJZDogJ3NtYWxsLWdhbWVzLWRkYTdhJyxcbiAgICAgICAgc3RvcmFnZUJ1Y2tldDogJ3NtYWxsLWdhbWVzLWRkYTdhLmFwcHNwb3QuY29tJyxcbiAgICAgICAgbWVzc2FnaW5nU2VuZGVySWQ6ICc1MzYyOTQ4NDk5OTQnLFxuICAgICAgICBhcHBJZDogJzE6NTM2Mjk0ODQ5OTk0OndlYjphN2VhZjY2NmY2OGY0NmM1MzdlMzMzJyxcbiAgICAgIH07XG4gICAgICAvLyBJbml0aWFsaXplIEZpcmViYXNlXG4gICAgICAvLyBjb25zdCBhcHAgPSBpbml0aWFsaXplQXBwKGZpcmViYXNlQ29uZmlnKTtcblxuICAgICAgaWYgKCFmaXJlYmFzZS5hcHBzLmxlbmd0aCkge1xuICAgICAgICBmaXJlYmFzZS5pbml0aWFsaXplQXBwKGZpcmViYXNlQ29uZmlnKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgZGIgPSBmaXJlYmFzZS5maXJlc3RvcmUoKTtcblxuICAgICAgY29uc3QgZ2F0ZUlkID0gJzEnO1xuXG4gICAgICBhc3luYyBmdW5jdGlvbiBpc0dhdGVBbHJlYWR5VXNlZCgpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCBxdWVyeVNuYXBzaG90ID0gYXdhaXQgZGIuY29sbGVjdGlvbignZ2FtZXMnKS53aGVyZSgnZ2F0ZScsICc9PScsIGdhdGVJZCkuZ2V0KCk7XG5cbiAgICAgICAgICBpZiAoIXF1ZXJ5U25hcHNob3QuZW1wdHkpIHtcbiAgICAgICAgICAgIGNvbnN0IGdhbWUgPSBxdWVyeVNuYXBzaG90LmRvY3NbMF0uZGF0YSgpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ0ZvdW5kIG1hdGNoaW5nIGdhbWU6JywgZ2FtZSk7XG4gICAgICAgICAgICByZXR1cm4gZ2FtZS51cmw7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdObyBtYXRjaGluZyBnYW1lIGZvdW5kLicpO1xuICAgICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3I6JywgZXJyKTtcbiAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgYXN5bmMgZnVuY3Rpb24gZ2V0Rmlyc3ROb3RDb21wbGV0ZWRHYW1lKCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IHF1ZXJ5U25hcHNob3QgPSBhd2FpdCBkYlxuICAgICAgICAgICAgLmNvbGxlY3Rpb24oJ2dhbWVzJylcbiAgICAgICAgICAgIC53aGVyZSgnaXNfY29tcGxldGVkJywgJz09JywgZmFsc2UpXG4gICAgICAgICAgICAub3JkZXJCeSgnc29ydF9vcmRlcicpXG4gICAgICAgICAgICAubGltaXQoMSlcbiAgICAgICAgICAgIC5nZXQoKTtcblxuICAgICAgICAgIGlmICghcXVlcnlTbmFwc2hvdC5lbXB0eSkge1xuICAgICAgICAgICAgY29uc3QgZG9jID0gcXVlcnlTbmFwc2hvdC5kb2NzWzBdO1xuICAgICAgICAgICAgY29uc3QgZ2FtZSA9IGRvYy5kYXRhKCk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnRmlyc3Qgbm90IGNvbXBsZXRlZCBnYW1lOicsIGdhbWUpO1xuICAgICAgICAgICAgZ2FtZS5pZCA9IGRvYy5pZDsgLy8gQWRkaW5nIHRoZSBkb2N1bWVudCBJRCB0byB0aGUgZ2FtZSBvYmplY3RcbiAgICAgICAgICAgIHJldHVybiBnYW1lO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnTm8gbW9yZSBnYW1lcyB0byBjb21wbGV0ZS4nKTtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3I6JywgZXJyKTtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBhc3luYyBmdW5jdGlvbiBtYXJrR2FtZUdhdGUoZ2FtZUlkKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgYXdhaXQgZGIuY29sbGVjdGlvbignZ2FtZXMnKS5kb2MoZ2FtZUlkKS51cGRhdGUoe1xuICAgICAgICAgICAgZ2F0ZTogZ2F0ZUlkLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdHYW1lJywgZ2FtZUlkLCAnbWFya2VkIGFzIGdhdGUnLCBnYXRlSWQpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIGdhbWUgZGF0YTonLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZ2V0Rmlyc3ROb3RDb21wbGV0ZWRHYW1lKCkudGhlbigoZ2FtZSkgPT4ge1xuICAgICAgICBpZiAoIWdhbWUpIHJldHVybjtcblxuICAgICAgICBpZiAoZ2FtZS5nYXRlID09PSAnJykge1xuICAgICAgICAgIGlzR2F0ZUFscmVhZHlVc2VkKCkudGhlbigoZ2FtZVVybCkgPT4ge1xuICAgICAgICAgICAgaWYgKGdhbWVVcmwgIT09ICcnKSB7XG4gICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gZ2FtZVVybDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIG1hcmtHYW1lR2F0ZShnYW1lLmlkKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGdhbWUudXJsO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoZ2FtZS5nYXRlICE9PSBnYXRlSWQpIHtcbiAgICAgICAgICAgIGFsZXJ0KCfQv9GA0LXQtNGL0LTRg9GJ0LDRjyDQs9C70LDQstCwINGA0LDRgdGB0LvQtdC00L7QstCw0L3QuNGPINC10YnQtSDQvdC1INC30LDQstC10YDRiNC10L3QsCEnKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBnYW1lLnVybDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc29sZS5sb2coJ2dhbWUnLCBnYW1lKTtcbiAgICAgIH0pO1xuICAgICJdLCJuYW1lcyI6WyJmaXJlYmFzZUNvbmZpZyIsImRiIiwiZ2F0ZUlkIiwiaXNHYXRlQWxyZWFkeVVzZWQiLCJxdWVyeVNuYXBzaG90IiwiZ2FtZSIsImVyciIsImdldEZpcnN0Tm90Q29tcGxldGVkR2FtZSIsImRvYyIsIm1hcmtHYW1lR2F0ZSIsImdhbWVJZCIsImVycm9yIiwiZ2FtZVVybCJdLCJtYXBwaW5ncyI6IjZDQUtNLE1BQU1BLEVBQWlCLENBQ3JCLE9BQVEsMENBQ1IsV0FBWSxvQ0FDWixVQUFXLG9CQUNYLGNBQWUsZ0NBQ2Ysa0JBQW1CLGVBQ25CLE1BQU8sMkNBQ2YsRUFJVyxTQUFTLEtBQUssUUFDakIsU0FBUyxjQUFjQSxDQUFjLEVBR3ZDLE1BQU1DLEVBQUssU0FBUyxZQUVkQyxFQUFTLElBRWYsZUFBZUMsR0FBb0IsQ0FDakMsR0FBSSxDQUNGLE1BQU1DLEVBQWdCLE1BQU1ILEVBQUcsV0FBVyxPQUFPLEVBQUUsTUFBTSxPQUFRLEtBQU1DLENBQU0sRUFBRSxJQUFHLEVBRWxGLEdBQUtFLEVBQWMsTUFLakIsZUFBUSxJQUFJLHlCQUF5QixFQUM5QixHQU5pQixDQUN4QixNQUFNQyxFQUFPRCxFQUFjLEtBQUssQ0FBQyxFQUFFLEtBQUksRUFDdkMsZUFBUSxJQUFJLHVCQUF3QkMsQ0FBSSxFQUNqQ0EsRUFBSyxJQUtmLE9BQVFDLEVBQVAsQ0FDQSxlQUFRLE1BQU0sU0FBVUEsQ0FBRyxFQUNwQixFQUNSLENBQ0YsQ0FFRCxlQUFlQyxHQUEyQixDQUN4QyxHQUFJLENBQ0YsTUFBTUgsRUFBZ0IsTUFBTUgsRUFDekIsV0FBVyxPQUFPLEVBQ2xCLE1BQU0sZUFBZ0IsS0FBTSxFQUFLLEVBQ2pDLFFBQVEsWUFBWSxFQUNwQixNQUFNLENBQUMsRUFDUCxNQUVILEdBQUtHLEVBQWMsTUFPakIsZUFBUSxJQUFJLDRCQUE0QixFQUNqQyxLQVJpQixDQUN4QixNQUFNSSxFQUFNSixFQUFjLEtBQUssQ0FBQyxFQUMxQkMsRUFBT0csRUFBSSxPQUNqQixlQUFRLElBQUksNEJBQTZCSCxDQUFJLEVBQzdDQSxFQUFLLEdBQUtHLEVBQUksR0FDUEgsRUFLVixPQUFRQyxFQUFQLENBQ0EsZUFBUSxNQUFNLFNBQVVBLENBQUcsRUFDcEIsSUFDUixDQUNGLENBRUQsZUFBZUcsRUFBYUMsRUFBUSxDQUNsQyxHQUFJLENBQ0YsTUFBTVQsRUFBRyxXQUFXLE9BQU8sRUFBRSxJQUFJUyxDQUFNLEVBQUUsT0FBTyxDQUM5QyxLQUFNUixDQUNsQixDQUFXLEVBQ0QsUUFBUSxJQUFJLE9BQVFRLEVBQVEsaUJBQWtCUixDQUFNLENBQ3JELE9BQVFTLEVBQVAsQ0FDQSxRQUFRLE1BQU0sNEJBQTZCQSxDQUFLLENBQ2pELENBQ0YsQ0FFREosRUFBMEIsRUFBQyxLQUFNRixHQUFTLENBQ25DQSxJQUVEQSxFQUFLLE9BQVMsR0FDaEJGLEVBQW1CLEVBQUMsS0FBTVMsR0FBWSxDQUNoQ0EsSUFBWSxHQUNkLE9BQU8sU0FBUyxLQUFPQSxFQUV2QkgsRUFBYUosRUFBSyxFQUFFLEVBQUUsS0FBSyxJQUFNLENBQy9CLE9BQU8sU0FBUyxLQUFPQSxFQUFLLEdBQzVDLENBQWUsQ0FFZixDQUFXLEVBRUdBLEVBQUssT0FBU0gsRUFDaEIsTUFBTSxrREFBa0QsRUFFeEQsT0FBTyxTQUFTLEtBQU9HLEVBQUssSUFHaEMsUUFBUSxJQUFJLE9BQVFBLENBQUksRUFDaEMsQ0FBTyJ9
