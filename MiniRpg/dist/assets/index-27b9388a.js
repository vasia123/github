(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))c(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&c(a)}).observe(document,{childList:!0,subtree:!0});function n(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function c(t){if(t.ep)return;t.ep=!0;const r=n(t);fetch(t.href,r)}})();const l={apiKey:"AIzaSyD19hXl7T_hR22RKTbO0HRqzJLWB-dhnpw",authDomain:"small-games-dda7a.firebaseapp.com",projectId:"small-games-dda7a",storageBucket:"small-games-dda7a.appspot.com",messagingSenderId:"536294849994",appId:"1:536294849994:web:a7eaf666f68f46c537e333"};firebase.apps.length||firebase.initializeApp(l);const i=firebase.firestore(),s="1";async function d(){try{const e=await i.collection("games").where("gate","==",s).get();if(e.empty)return console.log("No matching game found."),"";{const o=e.docs[0].data();return console.log("Found matching game:",o),o.url}}catch(e){return console.error("Error:",e),""}}async function f(){try{const e=await i.collection("games").where("is_completed","==",!1).orderBy("sort_order").limit(1).get();if(e.empty)return console.log("No more games to complete."),null;{const o=e.docs[0],n=o.data();return console.log("First not completed game:",n),n.id=o.id,n}}catch(e){return console.error("Error:",e),null}}async function u(e){try{await i.collection("games").doc(e).update({gate:s}),console.log("Game",e,"marked as gate",s)}catch(o){console.error("Error updating game data:",o)}}f().then(e=>{e&&(e.gate===""?d().then(o=>{o!==""?window.location.href=o:u(e.id).then(()=>{window.location.href=e.url})}):e.gate!==s?alert("предыдущая глава расследования еще не завершена!"):window.location.href=e.url,console.log("game",e))});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXgtMjdiOTM4OGEuanMiLCJzb3VyY2VzIjpbIi4uLy4uL2luZGV4Lmh0bWw/aHRtbC1wcm94eSZpbmRleD0wLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgLy8gSW1wb3J0IHRoZSBmdW5jdGlvbnMgeW91IG5lZWQgZnJvbSB0aGUgU0RLcyB5b3UgbmVlZFxuICAgICAgLy8gVE9ETzogQWRkIFNES3MgZm9yIEZpcmViYXNlIHByb2R1Y3RzIHRoYXQgeW91IHdhbnQgdG8gdXNlXG4gICAgICAvLyBodHRwczovL2ZpcmViYXNlLmdvb2dsZS5jb20vZG9jcy93ZWIvc2V0dXAjYXZhaWxhYmxlLWxpYnJhcmllc1xuICAgICAgLy8gWW91ciB3ZWIgYXBwJ3MgRmlyZWJhc2UgY29uZmlndXJhdGlvblxuICAgICAgY29uc3QgZmlyZWJhc2VDb25maWcgPSB7XG4gICAgICAgIGFwaUtleTogJ0FJemFTeUQxOWhYbDdUX2hSMjJSS1RiTzBIUnF6SkxXQi1kaG5wdycsXG4gICAgICAgIGF1dGhEb21haW46ICdzbWFsbC1nYW1lcy1kZGE3YS5maXJlYmFzZWFwcC5jb20nLFxuICAgICAgICBwcm9qZWN0SWQ6ICdzbWFsbC1nYW1lcy1kZGE3YScsXG4gICAgICAgIHN0b3JhZ2VCdWNrZXQ6ICdzbWFsbC1nYW1lcy1kZGE3YS5hcHBzcG90LmNvbScsXG4gICAgICAgIG1lc3NhZ2luZ1NlbmRlcklkOiAnNTM2Mjk0ODQ5OTk0JyxcbiAgICAgICAgYXBwSWQ6ICcxOjUzNjI5NDg0OTk5NDp3ZWI6YTdlYWY2NjZmNjhmNDZjNTM3ZTMzMycsXG4gICAgICB9O1xuICAgICAgLy8gSW5pdGlhbGl6ZSBGaXJlYmFzZVxuICAgICAgLy8gY29uc3QgYXBwID0gaW5pdGlhbGl6ZUFwcChmaXJlYmFzZUNvbmZpZyk7XG5cbiAgICAgIGlmICghZmlyZWJhc2UuYXBwcy5sZW5ndGgpIHtcbiAgICAgICAgZmlyZWJhc2UuaW5pdGlhbGl6ZUFwcChmaXJlYmFzZUNvbmZpZyk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGRiID0gZmlyZWJhc2UuZmlyZXN0b3JlKCk7XG5cbiAgICAgIGNvbnN0IGdhdGVJZCA9ICcxJztcblxuICAgICAgYXN5bmMgZnVuY3Rpb24gaXNHYXRlQWxyZWFkeVVzZWQoKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgcXVlcnlTbmFwc2hvdCA9IGF3YWl0IGRiLmNvbGxlY3Rpb24oJ2dhbWVzJykud2hlcmUoJ2dhdGUnLCAnPT0nLCBnYXRlSWQpLmdldCgpO1xuXG4gICAgICAgICAgaWYgKCFxdWVyeVNuYXBzaG90LmVtcHR5KSB7XG4gICAgICAgICAgICBjb25zdCBnYW1lID0gcXVlcnlTbmFwc2hvdC5kb2NzWzBdLmRhdGEoKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdGb3VuZCBtYXRjaGluZyBnYW1lOicsIGdhbWUpO1xuICAgICAgICAgICAgcmV0dXJuIGdhbWUudXJsO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnTm8gbWF0Y2hpbmcgZ2FtZSBmb3VuZC4nKTtcbiAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yOicsIGVycik7XG4gICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGFzeW5jIGZ1bmN0aW9uIGdldEZpcnN0Tm90Q29tcGxldGVkR2FtZSgpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCBxdWVyeVNuYXBzaG90ID0gYXdhaXQgZGJcbiAgICAgICAgICAgIC5jb2xsZWN0aW9uKCdnYW1lcycpXG4gICAgICAgICAgICAud2hlcmUoJ2lzX2NvbXBsZXRlZCcsICc9PScsIGZhbHNlKVxuICAgICAgICAgICAgLm9yZGVyQnkoJ3NvcnRfb3JkZXInKVxuICAgICAgICAgICAgLmxpbWl0KDEpXG4gICAgICAgICAgICAuZ2V0KCk7XG5cbiAgICAgICAgICBpZiAoIXF1ZXJ5U25hcHNob3QuZW1wdHkpIHtcbiAgICAgICAgICAgIGNvbnN0IGRvYyA9IHF1ZXJ5U25hcHNob3QuZG9jc1swXTtcbiAgICAgICAgICAgIGNvbnN0IGdhbWUgPSBkb2MuZGF0YSgpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ0ZpcnN0IG5vdCBjb21wbGV0ZWQgZ2FtZTonLCBnYW1lKTtcbiAgICAgICAgICAgIGdhbWUuaWQgPSBkb2MuaWQ7IC8vIEFkZGluZyB0aGUgZG9jdW1lbnQgSUQgdG8gdGhlIGdhbWUgb2JqZWN0XG4gICAgICAgICAgICByZXR1cm4gZ2FtZTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ05vIG1vcmUgZ2FtZXMgdG8gY29tcGxldGUuJyk7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yOicsIGVycik7XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgYXN5bmMgZnVuY3Rpb24gbWFya0dhbWVHYXRlKGdhbWVJZCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGF3YWl0IGRiLmNvbGxlY3Rpb24oJ2dhbWVzJykuZG9jKGdhbWVJZCkudXBkYXRlKHtcbiAgICAgICAgICAgIGdhdGU6IGdhdGVJZCxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBjb25zb2xlLmxvZygnR2FtZScsIGdhbWVJZCwgJ21hcmtlZCBhcyBnYXRlJywgZ2F0ZUlkKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyBnYW1lIGRhdGE6JywgZXJyb3IpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGdldEZpcnN0Tm90Q29tcGxldGVkR2FtZSgpLnRoZW4oKGdhbWUpID0+IHtcbiAgICAgICAgaWYgKCFnYW1lKSByZXR1cm47XG5cbiAgICAgICAgaWYgKGdhbWUuZ2F0ZSA9PT0gJycpIHtcbiAgICAgICAgICBpc0dhdGVBbHJlYWR5VXNlZCgpLnRoZW4oKGdhbWVVcmwpID0+IHtcbiAgICAgICAgICAgIGlmIChnYW1lVXJsICE9PSAnJykge1xuICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGdhbWVVcmw7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBtYXJrR2FtZUdhdGUoZ2FtZS5pZCkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBnYW1lLnVybDtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKGdhbWUuZ2F0ZSAhPT0gZ2F0ZUlkKSB7XG4gICAgICAgICAgICBhbGVydCgn0L/RgNC10LTRi9C00YPRidCw0Y8g0LPQu9Cw0LLQsCDRgNCw0YHRgdC70LXQtNC+0LLQsNC90LjRjyDQtdGJ0LUg0L3QtSDQt9Cw0LLQtdGA0YjQtdC90LAhJyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gZ2FtZS51cmw7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnNvbGUubG9nKCdnYW1lJywgZ2FtZSk7XG4gICAgICB9KTtcbiAgICAiXSwibmFtZXMiOlsiZmlyZWJhc2VDb25maWciLCJkYiIsImdhdGVJZCIsImlzR2F0ZUFscmVhZHlVc2VkIiwicXVlcnlTbmFwc2hvdCIsImdhbWUiLCJlcnIiLCJnZXRGaXJzdE5vdENvbXBsZXRlZEdhbWUiLCJkb2MiLCJtYXJrR2FtZUdhdGUiLCJnYW1lSWQiLCJlcnJvciIsImdhbWVVcmwiXSwibWFwcGluZ3MiOiJzc0JBS00sTUFBTUEsRUFBaUIsQ0FDckIsT0FBUSwwQ0FDUixXQUFZLG9DQUNaLFVBQVcsb0JBQ1gsY0FBZSxnQ0FDZixrQkFBbUIsZUFDbkIsTUFBTywyQ0FDZixFQUlXLFNBQVMsS0FBSyxRQUNqQixTQUFTLGNBQWNBLENBQWMsRUFHdkMsTUFBTUMsRUFBSyxTQUFTLFlBRWRDLEVBQVMsSUFFZixlQUFlQyxHQUFvQixDQUNqQyxHQUFJLENBQ0YsTUFBTUMsRUFBZ0IsTUFBTUgsRUFBRyxXQUFXLE9BQU8sRUFBRSxNQUFNLE9BQVEsS0FBTUMsQ0FBTSxFQUFFLElBQUcsRUFFbEYsR0FBS0UsRUFBYyxNQUtqQixlQUFRLElBQUkseUJBQXlCLEVBQzlCLEdBTmlCLENBQ3hCLE1BQU1DLEVBQU9ELEVBQWMsS0FBSyxDQUFDLEVBQUUsS0FBSSxFQUN2QyxlQUFRLElBQUksdUJBQXdCQyxDQUFJLEVBQ2pDQSxFQUFLLElBS2YsT0FBUUMsRUFBUCxDQUNBLGVBQVEsTUFBTSxTQUFVQSxDQUFHLEVBQ3BCLEVBQ1IsQ0FDRixDQUVELGVBQWVDLEdBQTJCLENBQ3hDLEdBQUksQ0FDRixNQUFNSCxFQUFnQixNQUFNSCxFQUN6QixXQUFXLE9BQU8sRUFDbEIsTUFBTSxlQUFnQixLQUFNLEVBQUssRUFDakMsUUFBUSxZQUFZLEVBQ3BCLE1BQU0sQ0FBQyxFQUNQLE1BRUgsR0FBS0csRUFBYyxNQU9qQixlQUFRLElBQUksNEJBQTRCLEVBQ2pDLEtBUmlCLENBQ3hCLE1BQU1JLEVBQU1KLEVBQWMsS0FBSyxDQUFDLEVBQzFCQyxFQUFPRyxFQUFJLE9BQ2pCLGVBQVEsSUFBSSw0QkFBNkJILENBQUksRUFDN0NBLEVBQUssR0FBS0csRUFBSSxHQUNQSCxFQUtWLE9BQVFDLEVBQVAsQ0FDQSxlQUFRLE1BQU0sU0FBVUEsQ0FBRyxFQUNwQixJQUNSLENBQ0YsQ0FFRCxlQUFlRyxFQUFhQyxFQUFRLENBQ2xDLEdBQUksQ0FDRixNQUFNVCxFQUFHLFdBQVcsT0FBTyxFQUFFLElBQUlTLENBQU0sRUFBRSxPQUFPLENBQzlDLEtBQU1SLENBQ2xCLENBQVcsRUFDRCxRQUFRLElBQUksT0FBUVEsRUFBUSxpQkFBa0JSLENBQU0sQ0FDckQsT0FBUVMsRUFBUCxDQUNBLFFBQVEsTUFBTSw0QkFBNkJBLENBQUssQ0FDakQsQ0FDRixDQUVESixFQUEwQixFQUFDLEtBQU1GLEdBQVMsQ0FDbkNBLElBRURBLEVBQUssT0FBUyxHQUNoQkYsRUFBbUIsRUFBQyxLQUFNUyxHQUFZLENBQ2hDQSxJQUFZLEdBQ2QsT0FBTyxTQUFTLEtBQU9BLEVBRXZCSCxFQUFhSixFQUFLLEVBQUUsRUFBRSxLQUFLLElBQU0sQ0FDL0IsT0FBTyxTQUFTLEtBQU9BLEVBQUssR0FDNUMsQ0FBZSxDQUVmLENBQVcsRUFFR0EsRUFBSyxPQUFTSCxFQUNoQixNQUFNLGtEQUFrRCxFQUV4RCxPQUFPLFNBQVMsS0FBT0csRUFBSyxJQUdoQyxRQUFRLElBQUksT0FBUUEsQ0FBSSxFQUNoQyxDQUFPIn0=
